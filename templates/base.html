{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    {# jQuery #}
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    {# !jQuery #}

    {# Bootstarp 4 #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{% static '/bootstrap/css/bootstrap.css' %}">
    <script src="{% static '/bootstrap/js/bootstrap.bundle.js' %}"></script>
    {# !Bootstarp 4 #}

    {# Animate #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css"/>
    {# !Animate! #}

    {# Icons #}
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet"/>
    {# !Icons #}


    {# Styles #}
    <link rel="stylesheet" href="{% static '/build/styles/style.css' %}">
    {# !Styles #}


    {# Links #}
    {% block links %}{% endblock %}
    {# !Links #}

    {# VueJs #}
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    {# !VueJs #}

    {# Axios #}
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    {# !Axios #}


    <title>{% block title %} Micro Mason {% endblock %}</title>
</head>
<body>

<div class="page">

    {% block top %}
        {% include 'basepage/header.html' %}
    {% endblock %}

    <div class="page__wrapper container">

        {% block left %}
        {% endblock %}

        {% block center %}
        {% endblock %}

        {% block right %}
        {% endblock %}

    </div>

    {% block bottom %}
        {% include 'basepage/footer.html' %}
    {% endblock %}

    <!-- Modals -->
    {% include 'basepage/modals.html' %}


</div>

{# Scripts #}
<script src="{% static '/build/js/script.js' %}"></script>

<script src="{% static 'app.js' %}"></script>

<script>(CSS.paintWorklet || paintWorklet).addModule('{% static 'src/js/test.js' %}')</script>

{# !Scripts #}


{# CATALOG #}
<section id="categories" class="categories animate__animated animate__fadeIn">
    <div class="categories__content container">
        <ul class="categories__list animate__animated animate__fadeInDownBig">
            {% for grandparent, parents in categories.items %}
                <li class="categories__list-item">{{ grandparent.name }}</li>
                {#            <li class="categories__list-item">Женщинам</li>#}
                {#            <li class="categories__list-item">3</li>#}
            {% endfor %}
        </ul>
        {% for grandparent, parents in categories.items %}
            <ul class="categories__list_sub col-10 animate__animated animate__fadeIn">
                {% if parents %}
                    {% for parent, children in parents.items %}
                        <ul class="categories__content_sub">
                            <li class="categories__list-item_sub categories__list-item_sub_header"><a href="{{ parent.slug }}">{{ parent.name }}</a></li>
                            {% if parent %}
                                {% for child in children %}
                                    <li class="categories__list-item_sub"><a href="{{ child.slug }}">{{ child.name }}</a></li>
                                {% endfor %}
                            {% endif %}
                        </ul>
                    {% endfor %}
                {% endif %}
            </ul>
        {% endfor %}
    </div>
</section>
{# !CATALOG! #}


</body>
</html>

{% for parent, children in categories.items %}
    <div class="dropdown">
        <div class="dropdown__btn">
            {% if children %}
                {{ parent.name }}
                <i class="fa fa-caret-right" aria-hidden="true"></i>
            {% else %}
                <div><a href="{{ parent.slug }}">{{ parent.name }}</a></div>
            {% endif %}
        </div>
        {% if children %}
            <div class="dropdown__content">
                {% for child in children %}
                    <p><a href="{{ child.slug }}">{{ child.name }}</a></p>
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endfor %}